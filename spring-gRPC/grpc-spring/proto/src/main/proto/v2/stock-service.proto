syntax = "proto3";

package stock.v2;

import "google/protobuf/empty.proto";
import "common/common.proto";

option java_multiple_files = true;
option java_package = "com.trading.stock.v2";

message PriceUpdate {
  common.Stock stock = 1;
  double price = 2;
  string timestamp = 3;
}

message StockPriceRequest {
  common.Stock stock = 1;
}

message StockPriceResponse {
  common.Stock stock = 1;
  double price = 2;
  string timestamp = 3;
}

// Service for providing stock prices.
service StockService {

  // Unary API to get the current price for a specific stock.
  rpc GetStockPrice(StockPriceRequest) returns (StockPriceResponse);

  // Server streaming API to subscribe to real-time price updates.
  rpc GetPriceUpdates(google.protobuf.Empty) returns (stream PriceUpdate);

}
